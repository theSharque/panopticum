<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::main})}">
<head></head>
<body>
<main th:fragment="main" class="main-content">
    <div th:replace="~{fragments/breadcrumbs :: breadcrumbs(items=${breadcrumbs})}"></div>
    <h1 th:text="${msg['redis.keyDetailTitle']}">Key</h1>
    <div th:if="${keyDetail != null}" class="query-result-data">
        <dl class="detail-dl">
            <dt th:text="${msg['redis.key']}">Key</dt>
            <dd th:text="${keyDetail.key}" class="query-cell-mono"></dd>
            <dt th:text="${msg['common.type']}">Type</dt>
            <dd th:text="${keyDetail.type}"></dd>
            <dt th:text="${msg['redis.ttl']}">TTL</dt>
            <dd th:text="${keyDetail.ttl != null ? keyDetail.ttl + ' ms' : msg['redis.noExpiry']}"></dd>
        </dl>
        <h2 th:text="${msg['common.value']}">Value</h2>
        <div th:if="${keyDetail.type == 'string'}" class="detail-value">
            <pre class="detail-json" th:text="${keyDetail.value}"></pre>
        </div>
        <div th:if="${keyDetail.type == 'hash' and keyDetail.value != null}" class="detail-value">
            <table class="query-table">
                <thead>
                    <tr><th class="query-th" th:text="${msg['common.field']}">Field</th><th class="query-th" th:text="${msg['common.value']}">Value</th></tr>
                </thead>
                <tbody>
                    <tr th:each="entry : ${keyDetail.value}">
                        <td th:text="${entry.key}" class="query-cell-mono"></td>
                        <td th:text="${entry.value}" class="query-cell-mono"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div th:if="${(keyDetail.type == 'list' or keyDetail.type == 'set') and keyDetail.value != null}" class="detail-value">
            <ul class="detail-list">
                <li th:each="elem : ${keyDetail.value}" th:text="${elem}" class="query-cell-mono"></li>
            </ul>
        </div>
        <div th:if="${keyDetail.type == 'zset' and keyDetail.value != null}" class="detail-value">
            <table class="query-table">
                <thead>
                    <tr><th class="query-th" th:text="${msg['common.element']}">Element</th><th class="query-th" th:text="${msg['common.score']}">Score</th></tr>
                </thead>
                <tbody>
                    <tr th:each="sv : ${keyDetail.value}">
                        <td th:text="${sv.value}" class="query-cell-mono"></td>
                        <td th:text="${sv.score}" class="query-cell-mono"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <p th:if="${keyDetail == null}" class="text-dim" th:text="${msg['redis.keyNotFoundOrError']}">Key not found or connection error.</p>
</main>
</body>
</html>
