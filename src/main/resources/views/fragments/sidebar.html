<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Sidebar</title>
</head>
<body>
<aside th:fragment="sidebar(connections, adminLock)" id="sidebar" class="sidebar">
    <nav class="sidebar-nav">
        <span class="sidebar-section-title" th:text="${msg['sidebar.connections']}">Connections</span>
        <a th:if="${!adminLock}" th:href="@{/settings}" class="sidebar-link" th:classappend="${requestUri != null and requestUri.endsWith('settings') ? 'active' : ''}" th:text="${msg['sidebar.addConnection']}">add connection</a>

        <th:block th:if="${connections != null and !connections.isEmpty()}">
            <div th:each="conn : ${connections}" class="sidebar-pg">
                <a th:if="${conn.type == 'postgresql'}" th:href="@{/pg/{id}(id=${conn.id})}" th:text="${conn.name}" class="sidebar-link">PG</a>
                <a th:if="${conn.type == 'mongodb'}" th:href="@{/mongo/{id}(id=${conn.id})}" th:text="${conn.name}" class="sidebar-link">Mongo</a>
                <a th:if="${conn.type == 'redis'}" th:href="@{/redis/{id}(id=${conn.id})}" th:text="${conn.name}" class="sidebar-link">Redis</a>
                <a th:if="${conn.type == 'clickhouse'}" th:href="@{/clickhouse/{id}(id=${conn.id})}" th:text="${conn.name}" class="sidebar-link">ClickHouse</a>
                <a th:if="${conn.type == 'mysql'}" th:href="@{/mysql/{id}(id=${conn.id})}" th:text="${conn.name}" class="sidebar-link">MySQL</a>
                <a th:if="${conn.type == 'sqlserver'}" th:href="@{/mssql/{id}(id=${conn.id})}" th:text="${conn.name}" class="sidebar-link">MS SQL</a>
                <a th:if="${conn.type == 'oracle'}" th:href="@{/oracle/{id}(id=${conn.id})}" th:text="${conn.name}" class="sidebar-link">Oracle</a>
                <a th:if="${conn.type == 'cassandra'}" th:href="@{/cassandra/{id}(id=${conn.id})}" th:text="${conn.name}" class="sidebar-link">Cassandra</a>
                <a th:if="${conn.type == 'rabbitmq'}" th:href="@{/rabbitmq/{id}/queues(id=${conn.id})}" th:text="${conn.name}" class="sidebar-link">RabbitMQ</a>
                <a th:if="${conn.type == 'kafka'}" th:href="@{/kafka/{id}/topics(id=${conn.id})}" th:text="${conn.name}" class="sidebar-link">Kafka</a>
                <a th:if="${conn.type == 'elasticsearch'}" th:href="@{/elasticsearch/{id}/indices(id=${conn.id})}" th:text="${conn.name}" class="sidebar-link">Elasticsearch</a>
                <form th:if="${!adminLock}"
                      class="sidebar-delete-form"
                      th:attr="hx-delete=@{/settings/delete-connection/{id}(id=${conn.id})}, hx-confirm=${msg['sidebar.deleteConfirmPrefix'] + conn.name + msg['sidebar.deleteConfirmSuffix']}"
                      hx-target="#sidebar"
                      hx-swap="outerHTML">
                    <button type="submit" class="sidebar-delete" th:attr="aria-label=${msg['sidebar.delete']}, title=${msg['sidebar.delete']}">×</button>
                </form>
            </div>
        </th:block>
    </nav>
    <div class="sidebar-footer">
        <a href="https://github.com/theSharque" target="_blank" rel="noopener noreferrer" class="sidebar-footer-link">© 2026 by theSharque</a>
        <span class="sidebar-footer-version" th:text="${appVersion}">dev</span>
    </div>
</aside>
</body>
</html>
