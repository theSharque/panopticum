<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::main})}">
<head></head>
<body>
<main th:fragment="main" class="main-content">
    <h1>Добавить подключение</h1>

    <h2>Добавить PostgreSQL</h2>
    <form action="/settings/add-postgres" method="post" class="add-connection-form"
          hx-post="/settings/add-postgres"
          hx-target="#sidebar"
          hx-swap="outerHTML">
        <div class="form-group">
            <label for="name">Название</label>
            <input type="text" id="name" name="name" required placeholder="Например: Production DB">
        </div>
        <div class="form-group">
            <label for="host">Хост</label>
            <input type="text" id="host" name="host" required placeholder="localhost" value="localhost">
        </div>
        <div class="form-group">
            <label for="port">Порт</label>
            <input type="number" id="port" name="port" value="5432">
        </div>
        <div class="form-group">
            <label for="database">База данных</label>
            <input type="text" id="database" name="database" required placeholder="mydb">
        </div>
        <div class="form-group">
            <label for="username">Пользователь</label>
            <input type="text" id="username" name="username" required placeholder="user">
        </div>
        <div class="form-group">
            <label for="password">Пароль</label>
            <input type="password" id="password" name="password" placeholder="password">
        </div>
        <div class="form-actions">
            <button type="button" class="btn-check"
                    hx-post="/settings/test-postgres"
                    hx-include="closest('form')"
                    hx-target="#connection-test-result"
                    hx-swap="innerHTML">
                Проверить
            </button>
            <button type="submit">Добавить</button>
        </div>
        <div id="connection-test-result" class="connection-test-result"></div>
    </form>

    <h2>Добавить MongoDB</h2>
    <form action="/settings/add-mongo" method="post" class="add-connection-form"
          hx-post="/settings/add-mongo"
          hx-target="#sidebar"
          hx-swap="outerHTML">
        <div class="form-group">
            <label for="name-mongo">Название</label>
            <input type="text" id="name-mongo" name="name" required placeholder="Например: Production Mongo">
        </div>
        <div class="form-group">
            <label for="host-mongo">Хост</label>
            <input type="text" id="host-mongo" name="host" required placeholder="localhost" value="localhost">
        </div>
        <div class="form-group">
            <label for="port-mongo">Порт</label>
            <input type="number" id="port-mongo" name="port" value="27017">
        </div>
        <div class="form-group">
            <label for="database-mongo">База данных</label>
            <input type="text" id="database-mongo" name="database" placeholder="admin">
        </div>
        <div class="form-group">
            <label for="username-mongo">Пользователь</label>
            <input type="text" id="username-mongo" name="username" placeholder="user">
        </div>
        <div class="form-group">
            <label for="password-mongo">Пароль</label>
            <input type="password" id="password-mongo" name="password" placeholder="password">
        </div>
        <div class="form-actions">
            <button type="button" class="btn-check"
                    hx-post="/settings/test-mongo"
                    hx-include="closest('form')"
                    hx-target="#connection-test-result-mongo"
                    hx-swap="innerHTML">
                Проверить
            </button>
            <button type="submit">Добавить</button>
        </div>
        <div id="connection-test-result-mongo" class="connection-test-result"></div>
    </form>

    <h2>Добавленные подключения</h2>
    <p>Список подключений отображается в меню слева.</p>
</main>
</body>
</html>
